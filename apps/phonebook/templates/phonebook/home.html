{% extends "base.html" %}

{% block page_title %}{{ _('Mozilla Community Directory') }}{% endblock %}
{% block body_id %}home{% endblock %}

{% block mosaic %}
{% if not user.is_authenticated() %}
  {% include 'phonebook/includes/mosaic.html' %}
{% endif %}
{% endblock mosaic %}

{% block content %}
  {% if not user.is_authenticated() %}
    <hgroup id="main-feature">
      <img id="mozillians-logo" src="{{ MEDIA_URL }}img/mozillians-logo.png" alt="Mozillians">
      <hr>
      <form id="homepage-search" action="{{ url('search') }}" method="GET">
          {{ csrf() }}
          <input type="text" name="q" class="search-query" 
          placeholder="{{ _('Search by name or group') }}">
       </form>
    </hgroup>

    <article id="information" class="container">
      <section id="quote">
          <img alt="<username goes here>" src="{{ MEDIA_URL }}img/sean-placeholder.png">
          <blockquote>
            {% trans %}
            <p>Salvia pop-up quinoa portland, cray blog pug next level godard pinterest banh mi freegan stumptown. Jean shorts YOLO street art bespoke wolf.</p>
            <small>Sean Martell</small>
            {% endtrans %}
          </blockquote>
      </section>

      <section id="about">
          <h2>{{ _('What is mozillians?') }}</h2>
          <p>
            {% trans %}
            Tousled direct trade kale chips, ugh artisan try-hard church-key synth thundercats pop-up american apparel biodiesel portland trust fund pour-over. Banh mi wolf lo-fi bespoke swag. 3 wolf moon pitchfork messenger bag post-ironic, semiotics literally artisan fashion axe vinyl single-origin coffee banjo.
            {% endtrans %}
          </p>
      </section>
      
      <section id="mozfacts">
          <h2>23%</h2>
          <p>
            {% trans %}
            Salvia pop-up quinoa portland, cray blog pug next level godard pinterest banh mi freegan stumptown. Jean shorts YOLO street art bespoke wolf.
            {% endtrans %}
          </p>
      </section>
    </article>

    <article id="get-involved">
      <div class="container">
        <div class="content">
          <h2>{{ _('How do I get involved?') }}</h2>
          <p>
            {% trans %}
            Farm-to-table semiotics portland, freegan mcsweeney's typewriter photo booth wayfarers banksy 3 wolf moon DIY pour-over readymade scenester whatever. YOLO blue bottle marfa, kogi vice seitan brunch.
            {% endtrans %}
          </p>
          {% trans bug_url='https://bugzilla.mozilla.org/enter_bug.cgi?product=Community%20Tools&component=Phonebook' %}
            <a href="{{ bug_url }}">find a bug</a>
          {% endtrans %}
        </div>
      </div>
    </article>

  {% else %}
    <div class="white-background">
      <div id="main-content">
        <article id="profile-info">
          <a href="{{ url('profile', user.username) }}">
            <img id="profile-photo" src="{{ user.userprofile.get_photo_url('150x150') }}" alt="{{ user.username }}">
          </a>
          <h2>{{ user.username }}</h2>
          <a href="mailto:{{ user.email }}">{{ user.email }}</a>
          {% if user.userprofile.country or user.userprofile.region or user.userprofile.city %}
            <section class="location">
              {% if user.userprofile.city %}
                {% if user.userprofile.country and user.is_authenticated() %}
                  <a href="{{ url('list_city', country=user.userprofile.country, city=user.userprofile.city) }}">
                    {{ user.userprofile.city }}</a>,
                {% else %}
                  {{ user.userprofile.city }}{% if user.userprofile.region %},{% endif %}
                {% endif %}
              {% endif %}
              {% if user.userprofile.region %}
                {% if user.userprofile.country and user.is_authenticated() %}
                  <a href="{{ url('list_region', country=user.userprofile.country, region=user.userprofile.region) }}">
                    {{ user.userprofile.region }}</a>
                {% else %}
                   {{ user.userprofile.region }}
                {% endif %}
              {% endif %}
              {% if user.userprofile.country %}
                {% if user.is_authenticated() %}
                  <a href="{{ url('list_country', country=user.userprofile.country) }}">
                    {{ user.userprofile.get_country_display() }}
                  </a>
                {% else %}
                    {{ user.userprofile.get_country_display() }}
                {% endif %}
              {% endif %}
            </section>
          {% endif %}
          {% if curated_groups %}
            <section class="groups">
              <h4>{{ _('Groups') }}</h4>
              {% for group in curated_groups %}
                <a href="{{ url('group', group.url) }}">{{ group }}</a>
                {% if not loop.last %},{% endif %}
              {% endfor %}
            </section>
          {% endif %}
          {% if user.userprofile.languages.count() %}
            <section class="languages">
              <h4>{{ _('Languages') }}</h4>
              {% for language in user.userprofile.languages.all() %}
                {{ language|capitalize }}
                {% if not loop.last %},{% endif %}
              {% endfor %}
            </section> 
          {% endif %}

          {% if user.userprofile.skills.count() %}
            {% trans skill_count=user.userprofile.skills.count() %}
              <h4>Has {{ skill_count }} skill</h4>
              {% pluralize %}
              <h4>Has {{ skill_count }} skills</h4>
            {% endtrans %}
          {% endif %}

          {# Using this placeholder code for now.

          {% if user.userprofile.badges.count() %}
            {% trans badges_count=user.userprofile.badges.count() %}
              Has {{ badges_count }} skills.
            {% endtrans %}
          {% endif %}

          #}
        </article>
        <article id="content-info">
          <h1>{{ _('Welcome!') }}</h1>
          <form id="homepage-search" action="{{ url('search') }}" method="GET">
            {{ csrf() }}
            <input type="text" name="q" class="search-query" 
            placeholder="{{ _('Search by name or group') }}">
            <small>Help text goes here</small>
          </form>
          <section class="announcements">
            <h2>Announcements</h2>
            <h3>First announcement</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore, beatae, voluptates amet atque ratione sit.</p>
            <h3>Second announcement</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore, beatae, voluptates amet atque ratione sit.</p>
            <h3>Third announcement</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore, beatae, voluptates amet atque ratione sit.</p>
          </section>
        </article>
      </div>
    </div>
  {% endif %}

  <a href="#" id="back-to-top"><img src="{{ MEDIA_URL }}img/back-to-top-arrow.png" alt="Back to top"></a>
{% endblock content %}

{% block page_js %}
  {{ js('homepage') }}
{% endblock %}
